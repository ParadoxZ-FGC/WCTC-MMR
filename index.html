<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/global.css">
    <link rel="icon" type="image/png" href="assets/smash_ball.png">
    <title>WCTC MMR Info Submission</title>
  </head>
  
  <body>
    <div class="content">
      <div class="content-header">
        <h1>WCTC Smash Team Rating</h1>
      </div>
  
      <div class="content-main">
        <form id="add">
          <h2 class="section-title">Add New User</h2>
          <div id="newp">
            <label for="new-user-name">Username:</label>
            <input type="text" id="new-user-name" name="USERNAME" placeholder="Enter new player's tag..." maxlength="28" required>
            <label>Characters:</label>
            <datalist id="chars">
              <option value="01. Mario"></option><option value="02. Donkey Kong"></option><option value="03. Link"></option><option value="04. Samus"></option>
              <option value="04.1 Dark Samus"></option><option value="05. Yoshi"></option><option value="06. Kirby"></option><option value="07. Fox"></option>
              <option value="08. Pikachu"></option><option value="09. Luigi"></option><option value="10. Ness"></option><option value="11. Captain Falcon"></option>
              <option value="12. Jigglypuff"></option><option value="13. Peach"></option><option value="13.1 Daisy"></option><option value="14. Bowser"></option>
              <option value="15. Ice Climbers"></option><option value="16. Sheik"></option><option value="17. Zelda"></option><option value="18. Dr. Mario"></option>
              <option value="19. Pichu"></option><option value="20. Falco"></option><option value="21. Marth"></option><option value="21.1 Lucina"></option>
              <option value="22. Young Link"></option><option value="23. Ganondorf"></option><option value="24. Mewtwo"></option><option value="25. Roy"></option>
              <option value="25.1 Chrom"></option><option value="26. Mr. Game & Watch"></option><option value="27. Meta Knight"></option><option value="28. Pit"></option>
              <option value="28.1 Dark Pit"></option><option value="29. Zero Suit Samus"></option><option value="30. Wario"></option><option value="31. Snake"></option>
              <option value="32. Ike"></option><option value="33-35. Pokemon Trainer"></option><option value="36. Diddy Kong"></option><option value="37. Lucas"></option>
              <option value="38. Sonic"></option><option value="39. King Dedede"></option><option value="40. Olimar"></option><option value="41. Lucario"></option>
              <option value="42. R.O.B."></option><option value="43. Toon Link"></option><option value="44. Wolf"></option><option value="45. Villager"></option>
              <option value="46. Mega Man"></option><option value="47. Wii Fit Trainer"></option><option value="48. Rosalina & Luma"></option><option value="49. Little Mac"></option>
              <option value="50. Greninja"></option><option value="51. Mii Brawler"></option><option value="52. Mii Swordfighter"></option><option value="53. Mii Gunner"></option>
              <option value="54. Palutena"></option><option value="55. Pac-Man"></option><option value="56. Robin"></option><option value="57. Shulk"></option>
              <option value="58. Bowser Jr."></option><option value="59. Duck Hunt"></option><option value="60. Ryu"></option><option value="60.1 Ken"></option>
              <option value="61. Cloud"></option><option value="62. Corrin"></option><option value="63. Bayonetta"></option><option value="64. Inkling"></option>
              <option value="65. Ridley"></option><option value="66. Simon"></option><option value="66.1 Richter"></option><option value="67. King K. Rool"></option>
              <option value="68. Isabelle"></option><option value="69. Incineroar"></option><option value="70. Piranha Plant"></option><option value="71. Joker"></option>
              <option value="72. Hero"></option><option value="73. Banjo & Kazooie"></option><option value="74. Terry"></option><option value="75. Byleth"></option>
              <option value="76. Min Min"></option><option value="77. Steve"></option><option value="78. Sephiroth"></option><option value="79-80. Pyra/Mythra"></option>
              <option value="81. Kazuya"></option><option value="82. Sora"></option>
            </datalist>
            <input placeholder="None" autocomplete="on" list="chars" name="MAIN"> / <input placeholder="None" autocomplete="on" list="chars" name="SECOND">
            <br><br>
            <label for="new-user-school">School:</label>
            <input type="text" id="new-user-school" name="SCHOOL" placeholder="Enter new player's school..." maxlength="28" required>
            <label for="new-user-opt-in">Opt: In</label>
            <input type="radio" id="new-user-opt-in" name="OPT" value="IN" required>
            <label for="new-user-opt-out">Out</label>
            <input type="radio" id="new-user-opt-out" name="OPT" value="OUT" required>
            to public leaderboard.
            <br><br>
            <input type="submit" value="Submit" id="add-new-user">
          </div>
        </form>

        <form id="modify">
          <h2 class="section-title">Update Rankings</h2>
          <div class="players">
            <div class="player" id="p1">
              <h3>Player 1</h3>
              <label for="p1-user-name">Username:</label>
              <input type="text" id="p1-user-name" name="p1-user-name" placeholder="Enter first player's tag..." maxlength="28" required>
              <label for="p1-win">Win</label>
              <input type="radio" id="p1-win" name="p1-winlose" value="Win" required>
              <label for="p1-lose">Lose</label>
              <input type="radio" id="p1-lose" name="p1-winlose" value="Lose" required>
            </div>
            <div class="player" id="p2">
              <h3>Player 2</h3>
              <label for="p2-user-name">Username:</label>
              <input type="text" id="p2-user-name" name="p2-user-name" placeholder="Enter second player's tag..." maxlength="28" required>
            </div>
          </div>
          <input type="submit" value="Submit" id="update-ratings">
        </form>

        <script>
          const add = document.querySelector("#add")
          const scriptURL = 'https://script.google.com/macros/s/AKfycbwjijnteWhJXPU7aPUln0JcTjQe5x6-2-YqY_uyhqIWDw-JjzYgxZN0_PbuxIUSAjLBmw/exec'

          form.addEventListener('submit', e => {
            e.preventDefault()

            const responseBody = new FormData(add)
            const TrendBody = responseBody.getAll("TRENDS").join(" ")
            responseBody.set('TRENDS', TrendBody)
            fetch(scriptURL, { method: 'POST', body: responseBody })
                    .then(response => { alert('Success!', response) })
                    .catch(error => alert('Error!', error.message))
          })

          const modify = document.querySelector("#modify")
          form.addEventListener('submit', e => {
            e.preventDefault()

            const responseBody = new FormData(modify)
            const TrendBody = responseBody.getAll("TRENDS").join(" ")
            responseBody.set('TRENDS', TrendBody)
            fetch(scriptURL, { method: 'POST', body: responseBody })
                    .then(response => { alert('Success!', response) })
                    .catch(error => alert('Error!', error.message))
          })
        </script>
      </div>
  
      <div class="content-footer">
        <em>&copy; developed by Noah Strekow (paradox) | 2024</em>
      </div>
    </div>
  </body>
</html>
